#:kivy 2.1.0

<ScreenOperateManual>:
    MDBoxLayout:
        orientation: "vertical"

		# header layout
        MDBoxLayout:
            id: header_layout
            orientation: "horizontal"
            padding: 20
			size_hint_y: 0.1
                    
            Image:
                id: logo
                source:'asset/logo_rafindo.png'
                size_hint_x: 0.25
                allow_stretch: True 

			MDLabel:
				id: subtitle            
				text: "PIPE BENDING CNC MACHINE"
				halign: "center"
				valign: "middle"
				font_style: 'H5'
				color: 0, 0, 0
                  
            Image:
                id: logo
                source:'asset/logo_polman.png'
                size_hint_x: 0.25
                allow_stretch: True  

		# title layout
		MDBoxLayout:
			id: layout_title
			orientation: "horizontal"
			size_hint_y: 0.05

			MDIconButton:
				id: bt_menu
				icon: "menu"
				size_hint_x: 0.2
				on_press: root.screen_main_menu()

			MDLabel:
				text: "OPERATE MANUAL"
				halign: "center"
				valign: "middle"
				font_style: 'H6'

			MDIconButton:
				id: bt_shutdown
				icon: "power"
				size_hint_x: 0.2
				on_press: root.exec_shutdown()

		# manual operate layout
		MDBoxLayout:
			id: layout_operate_manual
			orientation: "vertical"
			size_hint_y: 0.80
			padding:20
			spacing:40

			# machine illustration
			Image:
				id: machine
				source:'asset/machine_operation.png'
				allow_stretch: True
				size_hint_y: 0.5

			MDBoxLayout:
				orientation: "horizontal"
				size_hint_y: 0.5
				spacing: 20
				padding: 20

				MDBoxLayout:
					orientation: "vertical"
					size_hint_x: 0.4
					padding:20
				
					MDGridLayout:
						cols:2
						spacing:20
						size_hint_y: 0.5

						MDFillRoundFlatButton:
							id: bt_press
							text: "PRESS"
							font_style: 'H6'
							size_hint_x: 0.5
							on_press: root.exec_press()

						MDFillRoundFlatButton:
							id: bt_clamp
							text: "CLAMP"
							font_style: 'H6'
							size_hint_x: 0.5
							on_press: root.exec_clamp()

						MDFillRoundFlatButton:
							id: bt_table_up
							text: "TABLE UP"
							font_style: 'H6'
							size_hint_x: 0.5
							on_press: root.exec_table_up()

						MDFillRoundFlatButton:
							id: bt_table_shift
							text: "TABLE SHIFT"
							font_style: 'H6'
							size_hint_x: 0.5
							on_press: root.exec_table_shift()

					MDFillRoundFlatButton:
						id: bt_jog
						text: "JOG"
						font_style: 'H6'
						size_hint_x: 1
						size_hint_y: 0.25
						on_press: root.exec_jog()

					MDGridLayout:
						cols:3
						spacing:20
						size_hint_y: 0.25

						MDFillRoundFlatButton:
							id: bt_jog_feeding
							text: "JOG FEEDING"
							font_style: 'H6'
							size_hint_x: 0.3
							on_press: root.exec_jog_feeding()

						MDFillRoundFlatButton:
							id: bt_jog_bending
							text: "JOG BENDING"
							font_style: 'H6'
							size_hint_x: 0.3
							on_press: root.exec_jog_bending()

						MDFillRoundFlatButton:
							id: bt_jog_turning
							text: "JOG TURNING"
							font_style: 'H6'
							size_hint_x: 0.3
							on_press: root.exec_jog_turning()

					MDFillRoundFlatButton:
						id: bt_origin
						text: "ORIGIN"
						font_style: 'H6'
						size_hint_x: 1
						size_hint_y: 0.25
						on_press: root.exec_origin()

				MDGridLayout:
					cols:3
					spacing:20
					padding:20
					size_hint_x:0.6

					MDLabel:
						text: "Feeding (Y-axis)"
						font_style: 'Body1'

					MDTextField:
						id: input_operate_feeding
						hint_text: "Input Feeding (mm)"
						font_style: 'Body1'
						input_filter: 'float'
						on_text_validate: root.update()
					
					MDFillRoundFlatButton:
						id: bt_operate_feeding
						text: "EXECUTE"
						font_style: 'H6'
						size_hint_x: 0.3
						on_press: root.exec_operate_feeding()

					MDLabel:
						text: "Bending Angle (C-axis)"
						font_style: 'Body1'

					MDTextField:
						id: input_operate_bending
						hint_text: "Input Bending Angle (degree)"
						font_style: 'Body1'
						input_filter: 'float'
						on_text_validate: root.update()
					
					MDFillRoundFlatButton:
						id: bt_operate_bending
						text: "EXECUTE"
						font_style: 'H6'
						size_hint_x: 0.3
						on_press: root.exec_operate_bending()

					MDLabel:
						text: "Turning Angle (B-axis)"
						font_style: 'Body1'

					MDTextField:
						id: input_operate_turning
						hint_text: "Input Turning Angle (degree)"
						font_style: 'Body1'
						input_filter: 'float'
						on_text_validate: root.update()
					
					MDFillRoundFlatButton:
						id: bt_operate_turning
						text: "EXECUTE"
						font_style: 'H6'
						size_hint_x: 0.3
						on_press: root.exec_operate_turning()

		# MDRectangleFlatIconButton: navigation operation
		MDBoxLayout:
			orientation: "horizontal"
			size_hint_y: 0.05
			padding:20
			spacing:20

			MDFillRoundFlatIconButton:
				id: bt_screen_manual
				icon: "play"
				text: "MANUAL OPERATION"
				font_style: 'H6'
				size_hint_x: 0.5
				on_press: root.screen_operate_manual()
			
			MDFillRoundFlatIconButton:
				id: bt_screen_auto
				icon: "play"
				text: "AUTOMATIC OPERATION"
				font_style: 'H6'
				size_hint_x: 0.5
				on_press: root.screen_operate_auto()		

